# æ–‡æ¡£æ¨¡æ¿

æˆ‘ä»¬åœ¨ AdonisJS é¡¹ç›®ä¸­ä½¿ç”¨çš„æ¨¡æ¿ä»“åº“ï¼Œç”¨äºåˆ›å»ºæ–‡æ¡£ç½‘ç«™ã€‚è¯¥æ¨¡æ¿å…è®¸æœ€å¤§ç¨‹åº¦çš„è‡ªå®šä¹‰ï¼Œè€Œä¸ä¼šè¿‡äºå†—é•¿ã€‚

## ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ç±»ä¼¼ VitePress çš„å·¥å…·ï¼Ÿ

æˆ‘ä»æœªæˆä¸ºå‰ç«¯ä¼˜å…ˆå·¥å…·æ¸²æŸ“ Markdown æ–‡ä»¶ä¸ºé™æ€ HTML çš„å¿ å®ç²‰ä¸ã€‚æˆ‘è¿˜è®°å¾— Gridsome å’Œ Gatsby çš„æ—¶ä»£ï¼Œå½“æ—¶ä½¿ç”¨ GraphQL æ„å»ºé™æ€ç½‘ç«™è¢«è®¤ä¸ºæ˜¯æ­£å¸¸çš„ ğŸ˜‡ã€‚

è¯è™½å¦‚æ­¤ï¼Œ[å›´ç»•æ¸²æŸ“ Markdown çš„åŠŸèƒ½é›†](https://vitepress.dev/guide/markdown)æ„Ÿè§‰ç°ä»£ä¸”ä»¤äººè€³ç›®ä¸€æ–°ï¼Œå®ƒä½¿ç”¨äº†å‰ç«¯å·¥å…·ã€‚ä½†æ˜¯ï¼Œåº•å±‚åº“å¹¶ä¸å±€é™äºå‰ç«¯ç”Ÿæ€ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½• JavaScript é¡¹ç›®ä¸­ä½¿ç”¨å®ƒä»¬ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘æœ‰æ‰€æœ‰å¯ç”¨çš„å·¥å…·ï¼Œä¸ºä»€ä¹ˆä¸æ„å»ºå’Œä½¿ç”¨ä¸€äº›ç®€å•çš„ä¸œè¥¿ï¼Œè€Œè¿™ä¸ªä¸œè¥¿ä¸ä¼šéšç€å‰ç«¯ç”Ÿæ€ç³»ç»Ÿçš„æ–°ä¸€æ³¢åˆ›æ–°è€Œæ”¹å˜å‘¢ï¼Ÿ

## å·¥ä½œæµç¨‹

æ–‡æ¡£æ¨¡æ¿åŸºäºä»¥ä¸‹å·¥ä½œæµç¨‹è¦æ±‚æ„å»ºã€‚

- åˆ›å»ºä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶çš„ Markdown æ¸²æŸ“ç®¡é“ã€‚æˆ‘éœ€è¦æ§åˆ¶æ¯ä¸ª Markdown å…ƒç´ çš„æ¸²æŸ“ï¼Œå¹¶æ ¹æ®æˆ‘çš„éœ€æ±‚è°ƒæ•´å…¶ HTML è¾“å‡ºã€‚è¿™ç”± [@dimerapp/markdown](https://github.com/dimerapp/markdown) å’Œ [@dimerapp/edge](https://github.com/dimerapp/edge) åŒ…æä¾›æ”¯æŒã€‚

- ä½¿ç”¨ [Shiki](https://github.com/shikijs/shiki) ä¸ºä»£ç å—è®¾ç½®æ ·å¼ã€‚Shiki ä½¿ç”¨ VSCode ä¸»é¢˜å’Œè¯­æ³•è¿›è¡Œè¯­æ³•é«˜äº®ï¼Œå¹¶ä¸”ä¸éœ€è¦å‰ç«¯ä»£ç ã€‚

- ä½¿ç”¨ä¸€ä¸ª [åŸºç¡€ HTML å’Œ CSS ä¸»é¢˜](https://github.com/dimerapp/docs-theme) æ¥é¿å…æ¯æ¬¡éƒ½è¦ä»å¤´å¼€å§‹æ„å»ºæ–‡æ¡£ç½‘ç«™ã€‚ä½†ä»ç„¶å…è®¸è‡ªå®šä¹‰ä»¥ç»™æ¯ä¸ªç½‘ç«™æ·»åŠ ä¸ªæ€§ã€‚

- ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ JSON æ–‡ä»¶æ¥æ¸²æŸ“æ–‡æ¡£ä¾§è¾¹æ ï¼ˆJSON æ•°æ®åº“æ–‡ä»¶ï¼‰ã€‚æ‰«ææ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¹¶æŒ‰æŸç§çº¦å®šå¯¹å®ƒä»¬è¿›è¡Œæ’åºä¼šä½¿é‡æ„å˜å¾—æ›´åŠ å›°éš¾ã€‚

- å…è®¸é“¾æ¥åˆ° Markdown æ–‡ä»¶ï¼Œå¹¶åœ¨æ¸²æŸ“ä¸º HTML æ—¶è‡ªåŠ¨è§£æå…¶ URLã€‚

- å…è®¸å°†å›¾åƒå’Œè§†é¢‘æ”¾åœ¨ Markdown å†…å®¹æ—è¾¹ï¼Œå¹¶åœ¨æ¸²æŸ“ä¸º HTML æ—¶è‡ªåŠ¨è§£æå…¶ URLã€‚

## æ–‡ä»¶å¤¹ç»“æ„

```
.
â”œâ”€â”€ assets
â”‚  â”œâ”€â”€ app.css
â”‚  â””â”€â”€ app.js
â”œâ”€â”€ bin
â”‚  â”œâ”€â”€ build.ts
â”‚  â””â”€â”€ serve.ts
â”œâ”€â”€ content
â”‚  â”œâ”€â”€ docs
â”‚  â””â”€â”€ config.json
â”œâ”€â”€ src
â”‚  â”œâ”€â”€ bootstrap.ts
â”‚  â””â”€â”€ collections.ts
â”œâ”€â”€ templates
â”‚  â”œâ”€â”€ elements
â”‚  â”œâ”€â”€ layouts
â”‚  â”œâ”€â”€ partials
â”‚  â””â”€â”€ docs.edge
â”œâ”€â”€ vscode_grammars
â”‚  â”œâ”€â”€ dotenv.tmLanguage.json
â”‚  â””â”€â”€ main.ts
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.js
```

### assets ç›®å½•

`assets` ç›®å½•åŒ…å« CSS å’Œå‰ç«¯ JavaScript å…¥å£ç‚¹æ–‡ä»¶ã€‚æˆ‘ä»¬ä¸»è¦åœ¨è¿™äº›æ–‡ä»¶ä¸­å¯¼å…¥å…¶ä»–åŒ…å’Œ [åŸºç¡€ä¸»é¢˜](https://github.com/dimerapp/docs-theme)ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥è‡ªç”±è°ƒæ•´è¿™äº›æ–‡ä»¶ä»¥åˆ›å»ºæ›´å…·ä¸ªæ€§åŒ–çš„ç½‘ç«™ã€‚

### bin ç›®å½•

`bin` ç›®å½•åŒ…å«ä¸¤ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºå¯åŠ¨å¼€å‘æœåŠ¡å™¨å¹¶å°†æ–‡æ¡£å¯¼å‡ºä¸ºé™æ€ HTML æ–‡ä»¶ã€‚è¿™äº›è„šæœ¬åœ¨åº•å±‚å¯åŠ¨ AdonisJS æ¡†æ¶ã€‚

### content ç›®å½•

`content` ç›®å½•åŒ…å« Markdown å’Œæ•°æ®åº“ JSON æ–‡ä»¶ã€‚æˆ‘ä»¬å°† Markdown æ–‡ä»¶ç»„ç»‡æˆé›†åˆï¼Œæ¯ä¸ªé›†åˆéƒ½æœ‰è‡ªå·±çš„æ•°æ®åº“æ–‡ä»¶ã€‚

æ‚¨å¯ä»¥å°†é›†åˆè§†ä¸ºç½‘ç«™ä¸Šä¸åŒçš„æ–‡æ¡£åŒºåŸŸã€‚ä¾‹å¦‚ï¼šæ‚¨å¯ä»¥ä¸º **æ–‡æ¡£** åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œä¸º **API** å‚è€ƒåˆ›å»ºä¸€ä¸ªé›†åˆï¼Œä»¥åŠä¸º **é…ç½®å‚è€ƒ** åˆ›å»ºä¸€ä¸ªé›†åˆã€‚

å¦è¯·å‚é˜…ï¼š[åˆ›å»ºæ–°é›†åˆ](#creating-new-collections)

### src ç›®å½•

`src` ç›®å½•åŒ…å«ä¸€ä¸ª `bootstrap` æ–‡ä»¶ï¼Œç”¨äºå°†æ‰€æœ‰å†…å®¹è¿æ¥åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬ä¸å°†å¼•å¯¼è¿‡ç¨‹éšè—åœ¨æŸä¸ªåŒ…ä¸­ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¸Œæœ›æœ€ç»ˆé¡¹ç›®èƒ½å¤Ÿå®Œå…¨æ§åˆ¶é…ç½®ã€å¼•å…¥é¢å¤–åŒ…æˆ–ç§»é™¤æœªä½¿ç”¨çš„åŠŸèƒ½ã€‚

`collections.ts` æ–‡ä»¶ç”¨äºå®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªé›†åˆã€‚

### templates ç›®å½•

`templates` ç›®å½•åŒ…å«ç”¨äºæ¸²æŸ“ HTML çš„ Edge æ¨¡æ¿ã€‚

- `docs` æ¨¡æ¿æ¸²æŸ“ä¸€ä¸ªå¸¸è§„çš„æ–‡æ¡£å¸ƒå±€ï¼ŒåŒ…å«æ ‡é¢˜ã€ä¾§è¾¹æ ã€å†…å®¹å’Œç›®å½•ã€‚æ‚¨å¯ä»¥åœ¨å¤šä¸ªé›†åˆä¸­ä½¿ç”¨ç›¸åŒçš„æ¨¡æ¿ã€‚
- Logo ä½œä¸º SVG ä¿å­˜åœ¨ `partials/logo.edge` å’Œ `partials/logo_mobile.edge` æ–‡ä»¶ä¸­ã€‚
- åŸºç¡€ HTML ç‰‡æ®µæ˜¯ `layouts/main.edge` æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚æ‚¨å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰å…ƒæ ‡ç­¾æˆ–è„šæœ¬/å­—ä½“ã€‚

### vscode_grammars ç›®å½•

`vscode_grammars` ç›®å½•åŒ…å«æ‚¨å¸Œæœ›åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰ VSCode è¯­è¨€é›†åˆã€‚

å¦è¯·å‚é˜…ï¼š[ä½¿ç”¨è‡ªå®šä¹‰ VSCode è¯­æ³•](#using-custom-vscode-grammars)

## ä½¿ç”¨æ–¹æ³•

ä» GitHub å…‹éš†ä»“åº“ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ [degit](https://www.npmjs.com/package/degit)ï¼Œå®ƒä¼šåœ¨ä¸ä¿ç•™ git å†å²çš„æƒ…å†µä¸‹ä¸‹è½½ä»“åº“ã€‚

```sh
npx degit dimerapp/docs-boilerplate <my-website>
```

å®‰è£…ä¾èµ–é¡¹

```sh
cd <my-website>
npm i
```

è¿è¡Œå¼€å‘æœåŠ¡å™¨ã€‚

```sh
npm run dev
```

ç„¶åè®¿é—® [http://localhost:3333/docs/introduction](http://localhost:3333/docs/introduction) URL åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ç½‘ç«™ã€‚

## æ·»åŠ å†…å®¹

é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å« `introduction.md` æ–‡ä»¶çš„ `docs` é›†åˆã€‚

ä½œä¸ºç¬¬ä¸€æ­¥ï¼Œæ‚¨åº”è¯¥æ‰“å¼€ `content/docs/db.json` æ–‡ä»¶ï¼Œå¹¶ä¸ºæ‚¨çš„æ–‡æ¡£æ·»åŠ æ‰€æœ‰æ¡ç›®ã€‚æœ€åˆæ‰‹åŠ¨å®šä¹‰æ¡ç›®å¯èƒ½ä¼šæ„Ÿåˆ°ä¹å‘³ï¼Œä½†è¿™å°†å…è®¸åœ¨æœªæ¥è¿›è¡Œæ›´è½»æ¾çš„è‡ªå®šä¹‰ã€‚

ä¸€ä¸ªå…¸å‹çš„æ•°æ®åº“æ¡ç›®å…·æœ‰ä»¥ä¸‹å±æ€§ã€‚

```json
{
  "permalink": "introduction",
  "title": "Introduction",
  "contentPath": "./http_overview.md",
  "category": "Guides"
}
```

- `permalink`: æ–‡æ¡£çš„å”¯ä¸€ URLã€‚é›†åˆå‰ç¼€å°†è‡ªåŠ¨åº”ç”¨äºæ°¸ä¹…é“¾æ¥ã€‚è¯·å‚é˜… `src/collection.ts` æ–‡ä»¶ä¸­çš„é›†åˆå‰ç¼€ã€‚
- `title`: åœ¨ä¾§è¾¹æ ä¸­æ˜¾ç¤ºçš„æ ‡é¢˜ã€‚
- `contentPath`: æŒ‡å‘ Markdown æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚
- `category`: æ–‡æ¡£çš„åˆ†ç»„ç±»åˆ«ã€‚

å®šä¹‰å®Œæ‰€æœ‰æ¡ç›®åï¼Œåˆ›å»º Markdown æ–‡ä»¶å¹¶ç¼–å†™ä¸€äº›å®é™…å†…å®¹ã€‚

## æ›´æ”¹ç½‘ç«™é…ç½®

æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªéå¸¸ç®€æ´çš„é…ç½®æ–‡ä»¶æ¥æ›´æ–°ç½‘ç«™çš„æŸäº›éƒ¨åˆ†ã€‚é…ç½®å­˜å‚¨åœ¨ `content/config.json` æ–‡ä»¶ä¸­ã€‚

```json
{
  "links": {
    "home": {
      "title": "Your project name",
      "href": "/"
    },
    "github": {
      "title": "Your project on GitHub",
      "href": "https://github.com/dimerapp"
    }
  },
  "fileEditBaseUrl": "https://github.com/dimerapp/docs-boilerplate/blob/develop",
  "copyright": "Your project legal name"
}
```

- `links`: å¯¹è±¡åŒ…å«ä¸¤ä¸ªå›ºå®šé“¾æ¥ã€‚ä¸»é¡µå’Œ GitHub é¡¹ç›® URLã€‚

- `fileEditBaseUrl`: GitHub ä¸Šæ–‡ä»¶çš„åŸºç¡€ URLã€‚è¿™ç”¨äºå†…å®¹é¡µè„šä»¥æ˜¾ç¤º **åœ¨ GitHub ä¸Šç¼–è¾‘** é“¾æ¥ã€‚

- `copyright`: åœ¨ç‰ˆæƒé¡µè„šä¸­æ˜¾ç¤ºçš„åç§°ã€‚

- `menu`: å¯é€‰åœ°ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªå¤´éƒ¨èœå•ä½œä¸ºå¯¹è±¡æ•°ç»„ã€‚
  ```json
  {
    "menu": [
      {
        "href": "/docs/introduction",
        "title": "Docs",
      },
      {
        "href": "https://blog.project.com",
        "title": "Blog",
      },
      {
        "href": "https://github.com/project/releases",
        "title": "Releases",
      }
    ]
  }
  ```

- `search`: å¯é€‰åœ°ï¼Œæ‚¨å¯ä»¥ä¸º Algolia æœç´¢å®šä¹‰é…ç½®ã€‚
  ```json
  {
    "search": {
      "appId": "",
      "indexName": "",
      "apiKey": ""
    }
  }
  ```

## åˆ›å»ºæ–°é›†åˆ

æ‚¨å¯ä»¥é€šè¿‡åœ¨ `src/collections.ts` æ–‡ä»¶ä¸­å®šä¹‰å®ƒä»¬æ¥åˆ›å»ºå¤šä¸ªé›†åˆã€‚

é›†åˆä½¿ç”¨ `Collection` ç±»å®šä¹‰ã€‚è¯¥ç±»æ¥å—æ•°æ®åº“æ–‡ä»¶çš„ URLã€‚é…ç½®å¥½é›†åˆåï¼Œè°ƒç”¨ `collection.boot`ã€‚

```ts
// Docs
const docs = new Collection()
  .db(new URL('../content/docs/db.json', import.meta.url))
  .useRenderer(renderer)
  .urlPrefix('/docs')

await docs.boot()

// API reference
const apiReference = new Collection()
  .db(new URL('../content/api_reference/db.json', import.meta.url))
  .useRenderer(renderer)
  .urlPrefix('/api')

await apiReference.boot()

export const collections = [docs, apiReference]
```

## ä½¿ç”¨è‡ªå®šä¹‰ VSCode è¯­æ³•

æ‚¨å¯ä»¥é€šè¿‡åœ¨ `vscode_grammars/main.ts` æ–‡ä»¶ä¸­å®šä¹‰å®ƒä»¬æ¥æ·»åŠ å¯¹è‡ªå®šä¹‰ VSCode è¯­è¨€çš„æ”¯æŒã€‚æ¯ä¸ªæ¡ç›®éƒ½å¿…é¡»ç¬¦åˆ [Shiki](https://github.com/shikijs/shiki/blob/main/docs/languages.md) ä¸­çš„ `ILanguageRegistration` æ¥å£ã€‚

## æ›´æ”¹ Markdown ä»£ç å—ä¸»é¢˜

ä»£ç å—ä¸»é¢˜ä½¿ç”¨åœ¨ `src/bootstrap.ts` æ–‡ä»¶ä¸­åˆ›å»ºçš„ Markdown æ¸²æŸ“å™¨å®ä¾‹å®šä¹‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ [é¢„å®šä¹‰ä¸»é¢˜æˆ–è‡ªå®šä¹‰ä¸»é¢˜](https://github.com/dimerapp/shiki/tree/next#using-different-themes)ã€‚

```ts
export const renderer = new Renderer(view, pipeline)
  .codeBlocksTheme('material-theme-palenight')
```

## è‡ªå®šä¹‰ CSS

[åŸºç¡€æ–‡æ¡£ä¸»é¢˜](https://github.com/dimerapp/docs-theme) å¤§é‡ä½¿ç”¨ CSS å˜é‡ï¼Œå› æ­¤æ‚¨å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ç»„æ–°çš„å˜é‡æ¥è°ƒæ•´å¤§å¤šæ•°æ ·å¼ã€‚

å¦‚æœè¦æ›´æ”¹é¢œè‰²ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ [Radix Colors](https://www.radix-ui.com/docs/colors/getting-started/installation)ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é»˜è®¤æ ·å¼ã€‚

## è‡ªå®šä¹‰ HTML

ç”±äºæˆ‘ä»¬ä¸æ˜¯ä¸ºå…¨ä¸–ç•Œåˆ›å»ºä¸€ä¸ªé€šç”¨çš„æ–‡æ¡£ç”Ÿæˆå™¨ï¼Œå› æ­¤ HTML è¾“å‡ºä¸æ˜¯ 100% å¯å®šåˆ¶çš„ã€‚è¯¥æ¨¡æ¿æ—¨åœ¨åœ¨çº¦æŸæ¡ä»¶ä¸‹ä½¿ç”¨ã€‚

ä½†æ˜¯ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ§åˆ¶å¸ƒå±€ï¼Œå› ä¸ºé¡µé¢çš„æ‰€æœ‰éƒ¨åˆ†éƒ½ä½œä¸º Edge ç»„ä»¶å¯¼å‡ºï¼Œå¹¶ä¸”æ‚¨å¯ä»¥åœ¨ DOM ä¸­çš„ä»»ä½•ä½ç½®æ”¾ç½®å®ƒä»¬ã€‚è¯·æ£€æŸ¥ `templates/docs.edge` æ–‡ä»¶ä»¥äº†è§£å¦‚ä½•ä½¿ç”¨ä¸€åˆ‡ã€‚

### é¡µçœ‰æ’æ§½

æ‚¨å¯ä»¥å°†ä»¥ä¸‹ç»„ä»¶æ’æ§½ä¼ é€’ç»™ç½‘ç«™é¡µçœ‰ã€‚

- `logo (å¿…éœ€)`: åœ¨æ¡Œé¢è§†å£ä¸Šæ˜¾ç¤ºçš„ Logo å†…å®¹ã€‚

- `logoMobile (å¿…éœ€)`: åœ¨ç§»åŠ¨è§†å£ä¸Šæ˜¾ç¤ºçš„ Logo å†…å®¹ã€‚

- `popupMenu (å¯é€‰)`: ä¸ºå¼¹å‡ºèœå•è§¦å‘å™¨å®šä¹‰è‡ªå®šä¹‰æ ‡è®°ã€‚è§¦å‘å™¨ä»…åœ¨ç§»åŠ¨è§†å›¾ä¸­æ˜¾ç¤ºã€‚
  ```edge
  @component('docs::header', contentConfig)
    @slots('popMenu')
      <span> Open popup menu </span>
    @end
  @end
  ```

- `themeSwitcher (å¯é€‰)`: ä¸ºä¸»é¢˜åˆ‡æ¢å™¨æŒ‰é’®å®šä¹‰è‡ªå®šä¹‰æ ‡è®°ã€‚
  ```edge
  @component('docs::header', contentConfig)
    @slots('themeSwitcher')
      <span x-if="store.darkMode.enabled"> Dark </span>
      <span x-if="!store.darkMode.enabled"> Light </span>
    @end
  @end
  ```

- `github (å¯é€‰)`: ä¸ºé¡µçœ‰ä¸­çš„ GitHub é“¾æ¥å®šä¹‰è‡ªå®šä¹‰æ ‡è®°ã€‚
  ```edge
  @component('docs::header', contentConfig)
    @slots('github')
      <span> GitHub (11K+ Stars) </span>
    @end
  @end
  ```
  